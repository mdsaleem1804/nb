<div class="panel panel-primary panel-default-height-75">
  <div class="panel-heading">
    <h4>Report</h4>
  </div>
      <div class="col-lg-4 form-row">
        <span class="inp-label top">From Date</span>
        <p-calendar name="fromdate" #fromdate="ngModel" [required]="true" [readonlyInput]="true" [monthNavigator]="true"
          [yearNavigator]="true" yearRange="2000:2030" [(ngModel)]="fromDate" dateFormat="dd.mm.yy"></p-calendar>
      </div>
      <div class="col-lg-4 form-row">
        <span class="inp-label top">To Date</span>
        <p-calendar name="todate" #todate="ngModel" [required]="true" [readonlyInput]="true" [monthNavigator]="true"
          [yearNavigator]="true" yearRange="2000:2030" [(ngModel)]="toDate" dateFormat="dd.mm.yy"></p-calendar>
      </div>
      <div class="col-lg-4 form-row" style="text-align: center;">
        <button type="button" class="btn btn-default" (click)="getPurchaseView()">Search</button>
        <button class="btn btn-default" (click)="onPrint()">Print</button>
      </div>

    <p-tabView>

      <p-tabPanel header="Purchase" leftIcon="pi pi-calendar">
          <div class="col-lg-6 form-row">
              <div class="totals">
                <p>Total Amt  : <span class="amount">{{purchasetotalAmount}}</span></p>
              </div>
            </div>
            <div class="col-lg-6 form-row">
                <div class="totals">
                  <p>Total Bills : <span class="amount">{{purchasetotalBills}}</span></p>
                </div>
              </div>
            
          <div class="col-lg-12 form-row">
            <p-table #dtPending [value]="purchaseHeaderDetails" [rows]="10" [globalFilterFields]="['ledgerName']"
              [autoLayout]="true" [loading]="tableLoading" [responsive]="true" [paginator]="true">
              <ng-template pTemplate="caption">
                <div style="text-align: right">
                  <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
                  <input type="text" pInputText size="30" placeholder="Search.." (input)="dtPending.filterGlobal($event.target.value, 'contains')"
                    style="width:auto">
                </div>
              </ng-template>
              <ng-template pTemplate="header">
                <tr>
                  <th> Inv.No </th>
                  <th pSortableColumn="date"> Date <p-sortIcon field="date" ariaLabel="Sort"></p-sortIcon>
                  </th>
                  <th pSortableColumn="ledgerName">Ledger Name <p-sortIcon field="ledgerName" ariaLabel="Sort"></p-sortIcon>
                  </th>
                  <th pSortableColumn="totalAmount">Total Amount <p-sortIcon field="totalAmount" ariaLabel="Sort"></p-sortIcon>
                  </th>

                  <!-- <th>Action</th> -->
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-xArrPurchaseReport let-index="rowIndex">
                <tr>
                  <td>
                    <span class="ui-column-title">purchaseHeaderId</span>{{xArrPurchaseReport.purchaseHeaderId}}</td>
                  <td>
                    <span class="ui-column-title">billDate</span>{{xArrPurchaseReport.billDate}}</td>

                  <td>
                    <span class="ui-column-title">ledgerName</span>
                    <app-stockhistory [isAdmin]="true" [isInventory]="false" [getPurchasaeInvoiceNo]="xArrPurchaseReport.purchaseinvoiceno"
                      [operatorId]="userId" [gameBatchId]="xArrPurchaseReport.ledgerName" [sku]="xArrPurchaseReport.ledgerName"></app-stockhistory>
                  </td>
                  <td>
                    <span class="ui-column-title">totalAmount</span>{{xArrPurchaseReport.totalAmount}}</td>
                </tr>
              </ng-template>
            </p-table>
          </div>
       
      </p-tabPanel>

      <p-tabPanel header="PurchaseDetails" leftIcon="pi pi-calendar"> 
        <div class="col-lg-12 form-row">
          <p-table #dtPending [value]="purchaseViewDetails" [rows]="10" [globalFilterFields]="['ledgerName']"
            [autoLayout]="true" [loading]="tableLoading" [responsive]="true" [paginator]="true">
            <ng-template pTemplate="caption">
              <div style="text-align: right">
                <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
                <input type="text" pInputText size="30" placeholder="Search.." (input)="dtPending.filterGlobal($event.target.value, 'contains')"
                  style="width:auto">
              </div>
            </ng-template>
            <ng-template pTemplate="header">
              <tr>
                <th> Inv.No </th>
                <th> Date</th>
                <th>Ledger Name </th>
                <th>ItemName</th>
                <th>Batch</th>
                <th>Qty</th>
                <th>Price</th>
                <th>Mrp</th>
                <th>Gst</th>
                <th>Discount</th>

              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-response let-index="rowIndex">
              <tr>
                <td>{{response.purchaseHeaderId}}</td>
                <td>{{response.billDate}}</td>
                <td>{{response.ledgerName}}</td>
                <td>{{response.itemName}}</td>
                <td>{{response.batch}}</td>
                <td>{{response.qty}}</td>
                <td>{{response.price}}</td>
                <td>{{response.mrp}}</td>
                <td>{{response.gst}}</td>
                <td>{{response.discount}}</td>
              </tr>
            </ng-template>
          </p-table>
        </div>
    </p-tabPanel>
      <p-tabPanel header="Sales">
          <div class="col-lg-6 form-row">
              <div class="totals">
                <p>Total Amt  : <span class="amount">{{saletotalAmount}}</span></p>
              </div>
            </div>
            <div class="col-lg-6 form-row">
                <div class="totals">
                  <p>Total Bills : <span class="amount">{{saletotalBills}}</span></p>
                </div>
              </div>
            
          <div class="col-lg-12 form-row">
            <p-table #dtPending [value]="saleHeaderDetails" [rows]="10" [globalFilterFields]="['ledgerName']"
              [autoLayout]="true" [loading]="tableLoading" [responsive]="true" [paginator]="true">
              <ng-template pTemplate="caption">
                <div style="text-align: right">
                  <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
                  <input type="text" pInputText size="30" placeholder="Search.." (input)="dtPending.filterGlobal($event.target.value, 'contains')"
                    style="width:auto">
                </div>
              </ng-template>
              <ng-template pTemplate="header">
                <tr>
                  <th> Inv.No </th>
                  <th pSortableColumn="date"> Date <p-sortIcon field="date" ariaLabel="Sort"></p-sortIcon>
                  </th>
                  <th pSortableColumn="ledgerName">Ledger Name <p-sortIcon field="ledgerName" ariaLabel="Sort"></p-sortIcon>
                  </th>
                  <th pSortableColumn="totalAmount">Total Amount <p-sortIcon field="totalAmount" ariaLabel="Sort"></p-sortIcon>
                  </th>

                  <!-- <th>Action</th> -->
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-xArrPurchaseReport let-index="rowIndex">
                <tr>
                  <td>
                    <span class="ui-column-title">purchaseHeaderId</span>{{xArrPurchaseReport.saleHeaderId}}</td>
                  <td>
                    <span class="ui-column-title">billDate</span>{{xArrPurchaseReport.billDate}}</td>

                  <td>
                    <span class="ui-column-title">ledgerName</span>
                    <app-stockhistory [isAdmin]="true" [isInventory]="false" [getPurchasaeInvoiceNo]="xArrPurchaseReport.purchaseinvoiceno"
                      [operatorId]="userId" [gameBatchId]="xArrPurchaseReport.ledgerName" [sku]="xArrPurchaseReport.ledgerName"></app-stockhistory>
                  </td>
                  <td>
                    <span class="ui-column-title">totalAmount</span>{{xArrPurchaseReport.totalAmount}}</td>
                </tr>
              </ng-template>
            </p-table>
          </div>
       
       
       
        </p-tabPanel>
        <p-tabPanel header="Sales Details" leftIcon="pi pi-calendar"> 
          <div class="col-lg-12 form-row">
            <p-table #dtPending [value]="saleViewDetails" [rows]="10" [globalFilterFields]="['ledgerName']"
              [autoLayout]="true" [loading]="tableLoading" [responsive]="true" [paginator]="true">
              <ng-template pTemplate="caption">
                <div style="text-align: right">
                  <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
                  <input type="text" pInputText size="30" placeholder="Search.." (input)="dtPending.filterGlobal($event.target.value, 'contains')"
                    style="width:auto">
                </div>
              </ng-template>
              <ng-template pTemplate="header">
                <tr>
                  <th> Inv.No </th>
                  <th> Date</th>
                  <th>Ledger Name </th>
                  <th>ItemName</th>
                  <th>Batch</th>
                  <th>Qty</th>
                  <th>Mrp</th>
                  <th>Gst</th>
                  <th>Discount</th>
  
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-response let-index="rowIndex">
                <tr>
                  <td>{{response.saleHeaderId}}</td>
                  <td>{{response.billDate}}</td>
                  <td>{{response.ledgerName}}</td>
                  <td>{{response.itemName}}</td>
                  <td>{{response.batch}}</td>
                  <td>{{response.qty}}</td>
                  <td>{{response.mrp}}</td>
                  <td>{{response.gst}}</td>
                  <td>{{response.discount}}</td>
                </tr>
              </ng-template>
            </p-table>
          </div>
      </p-tabPanel>

      <p-tabPanel header="Stock" leftIcon="pi pi-calendar"> 
        <div class="col-lg-12 form-row">
          <p-table #dtPending [value]="stockView" [rows]="10" [globalFilterFields]="['ledgerName']"
            [autoLayout]="true" [loading]="tableLoading" [responsive]="true" [paginator]="true">
            <ng-template pTemplate="caption">
              <div style="text-align: right">
                <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
                <input type="text" pInputText size="30" placeholder="Search.." (input)="dtPending.filterGlobal($event.target.value, 'contains')"
                  style="width:auto">
              </div>
            </ng-template>
            <ng-template pTemplate="header">
              <tr>

                <th>ItemName</th>
                <th>Dated</th>
                <th>Inv.No</th>
                <th>Batch</th>
                <th>Stock</th>

              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-response let-index="rowIndex">
              <tr>
                <td>{{response.itemName}}</td>
                <td>{{response.billDate}}</td>
                <td>{{response.purchaseHeaderId}}</td>
                <td>{{response.batch}}</td>
                <td>{{response.stockCurrent}}</td>
                
              </tr>
            </ng-template>
          </p-table>
        </div>
    </p-tabPanel>
    </p-tabView>

</div>